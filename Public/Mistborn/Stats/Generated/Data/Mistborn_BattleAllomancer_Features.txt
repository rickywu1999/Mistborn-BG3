// Level 3
new entry "Class_Feature_Metal_Deflection"
type "PassiveData"
data "DisplayName" "h27b3a532a38642be80763512de76a8434d96"
data "Description" "h9d3bd0977eeb418e8985a726ce9387f4da99"
data "DescriptionParams" "2"
data "Icon" "Passive_BattleAllomancer_MetalDeflection"
data "StatsFunctorContext" "OnAttack;OnCast"
data "Conditions" "MistbornIronAbilities() or MistbornSteelAbilities()"
data "StatsFunctors" "ApplyStatus(SELF,METAL_DEFLECTION,100,1)"
data "Properties" "Highlighted"

new entry "METAL_DEFLECTION"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Passive_BattleAllomancer_MetalDeflection"
data "DisplayName" "h27b3a532a38642be80763512de76a8434d96"
data "Description" "h724ecbfaa79a4e54bf1c7d5c8b65843fb37b"
data "DescriptionParams" "2"
data "Boosts" "AC(2)"
data "StackType" "Ignore"

new entry "Class_Feature_Martial_Knowledge"
type "PassiveData"
data "Icon" "Passive_BattleAllomancer_MartialKnowledge"
data "DisplayName" "hbfd016ffb2574bac8e0974c436ecd0c2c197"
data "DisplayName" "h52a87cbf775647669589f746575e148c83a5"
data "Boosts" "ProficiencyBonus(Skill,History)"
data "Properties" "Highlighted"





// Level 6
new entry "Class_Feature_Adaptive_Maneuvers"
type "PassiveData"
data "Icon" "Passive_BattleAllomancer_AdaptiveManeuvers"
data "DisplayName" "hee526832f41b4025b0537b9cec709cdegd46;2"
data "Description" "habd5a17d57b8412eb3856e607fad07c856ac;1"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "IsWeaponAttack() and HasUseCosts('ActionPoint', true)"
data "StatsFunctors" "ApplyStatus(SELF, PHYSICAL_ALLOMANCY_BONUS_ACTION, 100, 1)"
data "Properties" "Highlighted"

new entry "Class_Feature_Adaptive_Maneuvers_Hidden"
type "PassiveData"
data "StatsFunctorContext" "OnCast"
data "Conditions" "MistbornPhysicalAbilities() and not MistbornPhysicalWeaponAbilities() and HasUseCosts('ActionPoint', true)"
data "StatsFunctors" "ApplyStatus(SELF, MISTBORN_WEAPON_ATTACK_BONUS_ACTION, 100, 1)"
data "Properties" "IsHidden"

new entry "PHYSICAL_ALLOMANCY_BONUS_ACTION"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Passive_BattleAllomancer_AdaptiveManeuvers"
data "StackId" "PHYSICAL_ALLOMANCY_BONUS_ACTION"
data "TickType" "EndTurn"
data "Boosts" "UnlockSpell(Physical_Allomancy_Bonus_Action)"
data "RemoveConditions" "AdaptiveManeuversAbilities()"
data "RemoveEvents" "OnSpellCast"
data "StatusGroups" "SG_RemoveOnRespec"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "MISTBORN_WEAPON_ATTACK_BONUS_ACTION"
type "StatusData"
data "StatusType" "BOOST"
using "EXTRA_ATTACK_WAR_MAGIC"
data "Icon" "Passive_BattleAllomancer_AdaptiveManeuvers"
data "StackId" "MISTBORN_WEAPON_ATTACK_BONUS_ACTION"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator"

new entry "Physical_Allomancy_Bonus_Action"
type "SpellData"
data "SpellType" "Target"
data "Icon" "Passive_BattleAllomancer_AdaptiveManeuvers"
data "DisplayName" "hee526832f41b4025b0537b9cec709cdegd46;2"
data "Description" "he75e9c6e7d9a4878a1b783ce241b7a27ba9c;1"
data "ContainerSpells" "CoinShot_Bonus;SteelShove_Bonus;SteelJump_Bonus;IronDisarm_Bonus;IronRedirection_Bonus;IronPull_Bonus;PewterEndurance_Bonus;PewterEnhance_Bonus;Tineye_Bonus"
data "SpellFlags" "IsLinkedSpellContainer;Temporary"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "Tineye_Bonus"
type "SpellData"
data "SpellType" "Shout"
using "Tineye_Base"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "CoinShot_Bonus"
type "SpellData"
data "SpellType" "Projectile"
using "CoinShot_Base"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "SteelShove_Bonus"
type "SpellData"
data "SpellType" "Target"
using "SteelShove_Base"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "SteelJump_Bonus"
type "SpellData"
data "SpellType" "Target"
using "SteelJump"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "PewterEndurance_Bonus"
type "SpellData"
data "SpellType" "Shout"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "TargetConditions" "Self()"
data "Icon" "Spell_Physical_Pewter_Endurance"
data "DisplayName" "h0843083863fd4d32b18879b510b4a1e8764a;1"
data "Description" "he21e89b4eca4472db632ce12aa7d0b224717;5"
data "DescriptionParams" "GainTemporaryHitPoints(5+WisdomModifier)"
data "TooltipStatusApply" "ApplyStatus(PEWTERENDURANCE_TEMP_HP, 100, 10)"
data "SpellProperties" "ApplyStatus(PEWTERENDURANCE_TEMP_HP,100,10)"
data "CastSound" "Spell_Cast_Buff_Shillelagh_L0"
data "TargetSound" "Spell_Impact_Buff_Shillelagh_L0"
data "VocalComponentSound" "Vocal_Component_EnchantWeapon"
data "CastTextEvent" "Cast"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"
data "SpellAnimation" "414bbf02-2918-4f01-83fb-1ddc7a588d88,,;,,;4156d364-d2c0-4a01-908c-3552f78f434d,,;6f0a29b6-0ae8-4ebf-a1e4-8069c4a6ad16,,;0c5dcc83-fa78-41da-b6a5-440b5ea30936,,;,,;bea988a0-2ec5-40d8-a67e-ffbd7454bc53,,;,,;,,"
data "VerbalIntent" "Buff"
data "SpellFlags" "IsMelee;IsLinkedSpellContainer"
data "SpellAnimationIntentType" "Peaceful"
data "PrepareEffect" "1162f3ba-ed65-4cd0-9e1f-5882414c0097"
data "CastEffect" "fb2cd1f1-3fb7-4efc-87cc-61f08868f567"
data "RequirementConditions" "not HasStatus('PEWTER_DRAINED') and HasPassive('Pewter_Unlock',context.Source)"

new entry "PewterEnhance_Bonus"
type "SpellData"
data "SpellType" "Shout"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "Icon" "Spell_Physical_Pewter_Enhance"
data "DisplayName" "h0b237ca447fb4310a1bc27e818b6518152g8;1"
data "Description" "h0ab304feea5f43628c0643b047849df650fb;5"
data "SpellProperties" "ApplyStatus(PEWTERENHANCE,100,-1);RegainHitPoints(5)"
data "TooltipStatusApply" "ApplyStatus(PEWTERENHANCE,100,-1)"
data "RequirementConditions" "not HasStatus('PEWTERENHANCE') and not HasStatus('PEWTERENHANCE_ENHANCE') and not HasStatus('PEWTERENHANCE_FLARE') and not HasStatus('PEWTER_DRAINED') and HasPassive('Pewter_Unlock',context.Source)"
data "PrepareSound" "Spell_Prepare_ClericGen_L1to3_01"
data "PrepareLoopSound" "Spell_Loop_ClericGen_L1to3"
data "CastSound" "Spell_Cast_Buff_Thaumaturgy_L0"
data "TargetSound" "Spell_Impact_Buff_Thaumaturgy_L0"
data "CastTextEvent" "Cast"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"
data "SpellAnimation" "9122eb08-93f1-4010-a275-f5ae3ec7c76e,,;,,;9fb11cca-02d4-4d2f-955f-2826c0553b17,,;5103d398-d8de-4aa4-9633-db2e1b7f6254,,;5301d674-b7da-47b6-b4cf-2802ba33a9e9,,;,,;86b3cf93-21fb-4a3d-bed9-97d0a567d084,,;,,;,,"
data "VerbalIntent" "Utility"
data "SpellFlags" "IsMelee;IsLinkedSpellContainer"
data "HitAnimationType" "MagicalNonDamage"
data "PrepareEffect" "e50b62f4-93ad-4c5e-82d7-7f2f6e25acd4"
data "CastEffect" "ccdad0c8-4ef6-4f07-bf35-80c9a9023556"
data "TooltipPermanentWarnings" "8eb9ca67-1f73-48a0-8f46-aeb4b004c95e"
data "Sheathing" "Melee"

new entry "IronDisarm_Bonus"
type "SpellData"
data "SpellType" "Target"
using "IronDisarm"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "IronRedirection_Bonus"
type "SpellData"
data "SpellType" "Shout"
using "IronRedirection"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"

new entry "IronPull_Bonus"
type "SpellData"
data "SpellType" "Target"
using "IronPull_Base"
data "SpellContainerID" "Physical_Allomancy_Bonus_Action"
data "UseCosts" "BonusActionPoint:1;MetalReserves:1"





// Level 11
new entry "Class_Feature_Allomantic_Strikes_Piercing"
type "PassiveData"
data "Icon" "Passive_BattleAllomancer_AllomanticStrikes_Piercing"
data "DisplayName" "hea340f7104354a30a6d77355f01b02db861f;2"
data "Description" "hd576dd15a29f4b8e8bc81d7f2be3fcd30fg4;1"
data "DescriptionParams" "Piercing"
data "Properties" "IsToggled;ToggledDefaultOn;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctorContext" "OnAttack;OnCast"
data "Conditions" "(MistbornIronAbilities() or MistbornSteelAbilities()) and not MistbornPhysicalWeaponAbilities() and HasActionResource('MetalReserves',1,0,false,true,context.Source)"
data "StatsFunctors" "ApplyStatus(SELF,ALLOMANTIC_STRIKES_PIERCING,100,-1)"
data "BoostContext" "OnAttack"
data "BoostConditions" "IsWeaponAttack() and IsProficientWithEquippedWeapon() and HasActionResource('MetalReserves',1,0,false,true,context.Source) and HasStatus('ALLOMANTIC_STRIKES_PIERCING',context.Source)"
data "Boosts" "CharacterWeaponDamage(WisdomModifier,Piercing)"
data "ToggleGroup" "Allomantic_Strikes"
data "ToggleOffFunctors" "RemoveStatus(ALLOMANTIC_STRIKES_PIERCING)"

new entry "Class_Feature_Allomantic_Strikes_Bludgeoning"
type "PassiveData"
data "Icon" "Passive_BattleAllomancer_AllomanticStrikes_Bludgeoning"
data "DisplayName" "h49279adaafc3466291cba2e57b211a9c52f6;2"
data "Description" "hd576dd15a29f4b8e8bc81d7f2be3fcd30fg4;1"
data "DescriptionParams" "Bludgeoning"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctorContext" "OnAttack;OnCast"
data "Conditions" "(MistbornIronAbilities() or MistbornSteelAbilities()) and not MistbornPhysicalWeaponAbilities() and HasActionResource('MetalReserves',1,0,false,true,context.Source)"
data "StatsFunctors" "ApplyStatus(SELF,ALLOMANTIC_STRIKES_BLUDGEONING,100,-1)"
data "BoostContext" "OnAttack"
data "BoostConditions" "IsWeaponAttack() and IsProficientWithEquippedWeapon() and HasActionResource('MetalReserves',1,0,false,true,context.Source) and HasStatus('ALLOMANTIC_STRIKES_BLUDGEONING',context.Source)"
data "Boosts" "CharacterWeaponDamage(WisdomModifier,Piercing)"
data "ToggleGroup" "Allomantic_Strikes"
data "ToggleOffFunctors" "RemoveStatus(ALLOMANTIC_STRIKES_BLUDGEONING)"

new entry "Class_Feature_Allomantic_Strikes_Slashing"
type "PassiveData"
data "Icon" "Passive_BattleAllomancer_AllomanticStrikes_Slashing"
data "DisplayName" "h137429b3107244f884bd8e1f52ccb06b1fc5;2"
data "Description" "hd576dd15a29f4b8e8bc81d7f2be3fcd30fg4;1"
data "DescriptionParams" "Slashing"
data "Properties" "IsToggled;ToggledDefaultAddToHotbar;Highlighted"
data "StatsFunctorContext" "OnAttack;OnCast"
data "Conditions" "(MistbornIronAbilities() or MistbornSteelAbilities()) and not MistbornPhysicalWeaponAbilities() and HasActionResource('MetalReserves',1,0,false,true,context.Source)"
data "StatsFunctors" "ApplyStatus(SELF,ALLOMANTIC_STRIKES_SLASHING,100,-1)"
data "BoostContext" "OnAttack"
data "BoostConditions" "IsWeaponAttack() and IsProficientWithEquippedWeapon() and HasActionResource('MetalReserves',1,0,false,true,context.Source) and HasStatus('ALLOMANTIC_STRIKES_SLASHING',context.Source)"
data "Boosts" "CharacterWeaponDamage(WisdomModifier,Piercing)"
data "ToggleGroup" "Allomantic_Strikes"
data "ToggleOffFunctors" "RemoveStatus(ALLOMANTIC_STRIKES_SLASHING)"

new entry "ALLOMANTIC_STRIKES_PIERCING"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Passive_BattleAllomancer_AllomanticStrikes_Piercing"
data "DisplayName" "hea340f7104354a30a6d77355f01b02db861f;2"
data "Description" "h2a5a1c7a8178417e83ce40c5209c81720d7e"
data "DescriptionParams" "Piercing"
data "StackType" "Ignore"
data "RemoveEvents" "OnAttack"
data "RemoveConditions" "IsWeaponAttack() and IsProficientWithEquippedWeapon() and HasActionResource('MetalReserves',1,0,false,true,context.Source)"
data "OnRemoveFunctors" "UseActionResource(MetalReserves,1)"
data "StackId" "ALLOMANTIC_STRIKES"

new entry "ALLOMANTIC_STRIKES_BLUDGEONING"
type "StatusData"
data "StatusType" "BOOST"
using "ALLOMANTIC_STRIKES_PIERCING"
data "Icon" "Passive_BattleAllomancer_AllomanticStrikes_Bludgeoning"
data "DisplayName" "h49279adaafc3466291cba2e57b211a9c52f6;2"
data "DescriptionParams" "Bludgeoning"

new entry "ALLOMANTIC_STRIKES_SLASHING"
type "StatusData"
data "StatusType" "BOOST"
using "ALLOMANTIC_STRIKES_PIERCING"
data "Icon" "Passive_BattleAllomancer_AllomanticStrikes_Slashing"
data "DisplayName" "h137429b3107244f884bd8e1f52ccb06b1fc5;2"
data "DescriptionParams" "Slashing"




// Level 17
new entry "Class_Feature_Metallic_Synergy"
type "PassiveData"
data "Icon" "Passive_BattleAllomancer_MetallicSynergy"
data "DisplayName" "h242dda5c056e4a018582c11dc47faa877397;2"
data "Description" "h24f297c7393e47fa9af02a42c95224a786ag;1"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "MistbornPhysicalAbilities()"
data "StatsFunctors" "ApplyStatus(SELF, METALLIC_SYNERGY_SELF,100,1);ApplyStatus(METALLIC_SYNERGY,100,1)"
data "Properties" "Highlighted"

new entry "METALLIC_SYNERGY_SELF"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Passive_BattleAllomancer_MetallicSynergy"
data "DisplayName" "h242dda5c056e4a018582c11dc47faa877397;2"
data "Description" "h1100c10a33164f9cbff489c52b0100d3g4ag;1"
data "StackId" "METALLIC_SYNERGY_SELF"
data "Passives" "Metallic_Synergy"
data "StackType" "Ignore"

new entry "Metallic_Synergy"
type "PassiveData"
data "Properties" "IsHidden"
data "Boosts" "IF(HasStatus('METALLIC_SYNERGY',context.Target,context.Source) and IsWeaponAttack()):Advantage(AttackRoll);"

new entry "METALLIC_SYNERGY"
type "StatusData"
data "StatusType" "BOOST"
data "Icon" "Passive_BattleAllomancer_MetallicSynergy"
data "DisplayName" "h242dda5c056e4a018582c11dc47faa877397;2"
data "Description" "h9ed8ad3c73b74921b8ac228d5da7622ba901;1"
data "StackId" "METALLIC_SYNERGY_TARGET"
data "StackType" "Ignore"
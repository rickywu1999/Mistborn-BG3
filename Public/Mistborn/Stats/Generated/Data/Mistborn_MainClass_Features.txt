// Level 1
new entry "Allomantic_Awakening"
type "PassiveData"
data "DisplayName" "h4464fa58fda94b66b8e68bf8c1872801df26;1"
data "Description" "h31237dbc2449448e8b2b2310a7285796f9eg;1"
data "Icon" "Allomantic_Awakening"
data "Properties" "Highlighted"

// Level 7
new entry "Metal_Flaring"
type "PassiveData"
data "DisplayName" "h4cd9b2ea47654358b84542b880e9011683gd;2"
data "Description" "h77f047b16f1d4aa186f7e7537c1bebae66b6;2"
data "Icon" "PassiveFeature_ExperimentalAlchemy"
data "Properties" "Highlighted"

// Level 9
new entry "Allomatic_Reflexes"
type "PassiveData"
data "DisplayName" "hbf80e029cf7b4f588cbe30b56224c668cg12"
data "Description" "h94cda78db01b4190a7dbc5753b644b235518"
data "Icon" "PassiveFeature_ExperimentalAlchemy"
data "Properties" "Highlighted"
data "StatsFunctorContext" "OnCreate;OnCombatStarted"
data "StatsFunctors" "ApplyStatus(SELF,ALLOMATIC_REFLEXES_AURA,100,-1);ApplyStatus(SELF,ALLOMATIC_REFLEXES_AURA_INNER,100,-1);"

new entry "ALLOMATIC_REFLEXES_AURA"
type "StatusData"
data "StatusType" "BOOST"
data "AuraRadius" "6"
data "AuraStatuses" "IF(Enemy()):ApplyStatus(ALLOMATIC_REFLEXES_DETECTED,100,0)"
data "StackType" "Ignore"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
data "StatusGroups" "SG_RemoveOnRespec"

new entry "ALLOMATIC_REFLEXES_AURA_INNER"
type "StatusData"
data "StatusType" "BOOST"
data "AuraRadius" "2"
data "AuraStatuses" "IF(Enemy()):ApplyStatus(ALLOMATIC_REFLEXES_DETECTED_INNER,100,0)"
data "StackType" "Ignore"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;ApplyToDead;IgnoreResting"
data "StatusGroups" "SG_RemoveOnRespec"

new entry "ALLOMATIC_REFLEXES_DETECTED"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;"

new entry "ALLOMATIC_REFLEXES_DETECTED_INNER"
type "StatusData"
data "StatusType" "BOOST"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog;DisablePortraitIndicator;"

new entry "Allomatic_Reflexes_Iron"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnCreate"
data "BoostConditions" "HasPassive('Iron_Unlock',context.Source)"
data "Boosts" "UnlockInterrupt(Interrupt_IronPull);UnlockInterrupt(Interrupt_IronDisarm)"

new entry "Allomatic_Reflexes_Steel"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnCreate"
data "BoostConditions" "HasPassive('Steel_Unlock',context.Source)"
data "Boosts" "UnlockInterrupt(Interrupt_SteelShove);"

new entry "Allomatic_Reflexes_Brass"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnCreate"
data "BoostConditions" "HasPassive('Brass_Unlock',context.Source)"
data "Boosts" "UnlockInterrupt(Interrupt_SootheBravery);UnlockInterrupt(Interrupt_SootheHatredMelee);UnlockInterrupt(Interrupt_SootheHatredRanged);"

new entry "Allomatic_Reflexes_Zinc"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnCreate"
data "BoostConditions" "HasPassive('Zinc_Unlock',context.Source)"
data "Boosts" "UnlockInterrupt(Interrupt_RiotStress);UnlockInterrupt(Interrupt_RiotTerrorMelee);UnlockInterrupt(Interrupt_RiotTerrorRanged);"

new entry "Allomatic_Reflexes_Chromium"
type "PassiveData"
data "Properties" "IsHidden"
data "BoostContext" "OnStatusApplied;OnStatusRemoved;OnCreate"
data "BoostConditions" "HasPassive('Chromium_Unlock',context.Source)"
data "Boosts" "UnlockInterrupt(Interrupt_ChromiumLeach);"

new entry "Interrupt_IronPull"
type "InterruptData"
data "Icon" "Spell_Physical_Iron_Pull"
data "DisplayName" "h3b2cd238c21d4db28bef7fe96bb89b70ef0f;2"
data "Description" "h60f624c94fd442889ca84e20255d8dbe1gcd;2"
data "DescriptionParams" "Distance(5)"
data "TooltipDamageList" "DealDamage(1d4+WisdomModifier,Bludgeoning);"
data "TooltipAttackSave" "Strength"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "IsMovable() and not Grounded() and not Tagged('GASEOUS_FORM') and not Tagged('CANT_SHOVE_THROW') and MistbornIsMetal() and MistbornSizeEqualOrSmaller(context.Observer.Size) and Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(IronPull_Base,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','IRON_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_IronDisarm"
type "InterruptData"
data "Icon" "Spell_Physical_Iron_Disarm"
data "DisplayName" "h60d706c025bb4834971f166fcf4ea2f56a2d;2"
data "Description" "he6aa05d79ebb4b288c04feb54a1d719e968f;3"
data "TooltipAttackSave" "Strength"
data "TooltipStatusApply" "ApplyStatus(DISARMED, 100, 1)"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Character() and not HasPassive('ImmuneToDisarm') and Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(IronDisarm,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','IRON_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_SteelShove"
type "InterruptData"
data "DisplayName" "h29d5f47696104527b1968d1b760ab016c2gc;2"
data "Description" "h40d2c1de0b73482b8e20d8d62513602d9088;2"
data "DescriptionParams" "Distance(5)"
data "TooltipDamageList" "DealDamage(1d4+WisdomModifier,Bludgeoning);"
data "Icon" "Spell_Physical_Steel_Shove"
data "TooltipAttackSave" "Strength"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "IsMovable() and not Grounded() and not Tagged('GASEOUS_FORM') and not Tagged('CANT_SHOVE_THROW') and MistbornIsMetal() and MistbornSizeEqualOrSmaller(context.Observer.Size) and Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(SteelShove_Base,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','STEEL_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_SootheBravery"
type "InterruptData"
data "Icon" "Spell_Mental_Brass_SootheBravery"
data "DisplayName" "heb308d84a71140babcbcb6bfa82229b743fc;1"
data "Description" "h6a7d74fbbd604d3a829a20d29a1c382e89e8;2"
data "DescriptionParams" "1"
data "TooltipAttackSave" "Wisdom"
data "TooltipPermanentWarnings" "a3c02130-a7c5-407c-aa28-6c5e8f40bacf"
data "TooltipStatusApply" "ApplyStatus(SOOTHESTRESS_BASE,100,3)"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(SootheBravery_Base,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','BRASS_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_SootheHatredMelee"
type "InterruptData"
data "Icon" "Spell_Mental_Brass_SootheHatredMelee"
data "DisplayName" "h240faff576284be4825971019168cdf3gdac;1"
data "Description" "ha965497adaad4c24b3e0d7adf274015cb949;4"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType)"
data "TooltipAttackSave" "Wisdom"
data "TooltipPermanentWarnings" "a3c02130-a7c5-407c-aa28-6c5e8f40bacf"
data "TooltipStatusApply" "ApplyStatus(CHARMED,100,2)"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED_INNER',context.Target)"
data "Properties" "UseSpell(SootheHatred_Melee,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','BRASS_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_SootheHatredRanged"
type "InterruptData"
data "Icon" "Spell_Mental_Brass_SootheHatredMelee"
data "DisplayName" "h240faff576284be4825971019168cdf3gdac;1"
data "Description" "ha965497adaad4c24b3e0d7adf274015cb949;4"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType)"
data "TooltipAttackSave" "Wisdom"
data "TooltipPermanentWarnings" "a3c02130-a7c5-407c-aa28-6c5e8f40bacf"
data "TooltipStatusApply" "ApplyStatus(CHARMED,100,2)"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(SootheHatred_Ranged,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','BRASS_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_RiotStress"
type "InterruptData"
data "Icon" "Spell_Mental_Zinc_RiotStress"
data "DisplayName" "h32dd9ec72b534c9fac2d2d9bd75546e98d08;1"
data "Description" "h7e09bfa035cb47648d436ba2585439e13627;2"
data "DescriptionParams" "1"
data "TooltipAttackSave" "Wisdom"
data "TooltipPermanentWarnings" "a3c02130-a7c5-407c-aa28-6c5e8f40bacf"
data "TooltipStatusApply" "ApplyStatus(RIOTSTRESS_BASE,100,3)"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(RiotStress_Base,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','ZINC_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_RiotTerrorMelee"
type "InterruptData"
data "Icon" "Spell_Mental_Zinc_RiotTerrorMelee"
data "DisplayName" "ha86d28dfb92f4fbc93bff87817f589f1ef18;1"
data "Description" "ha35f2aee61b041648e3509485848477b7baf;4"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType)"
data "TooltipAttackSave" "Wisdom"
data "TooltipStatusApply" "ApplyStatus(FRIGHTENED,100,2)"
data "TooltipPermanentWarnings" "a3c02130-a7c5-407c-aa28-6c5e8f40bacf"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED_INNER',context.Target)"
data "Properties" "UseSpell(RiotTerror_Melee,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','ZINC_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_RiotTerrorRanged"
type "InterruptData"
data "Icon" "Spell_Mental_Zinc_RiotTerrorMelee"
data "DisplayName" "ha86d28dfb92f4fbc93bff87817f589f1ef18;1"
data "Description" "ha35f2aee61b041648e3509485848477b7baf;4"
data "TooltipDamageList" "DealDamage(MainMeleeWeapon, MainMeleeWeaponDamageType)"
data "TooltipAttackSave" "Wisdom"
data "TooltipStatusApply" "ApplyStatus(FRIGHTENED,100,2)"
data "TooltipPermanentWarnings" "a3c02130-a7c5-407c-aa28-6c5e8f40bacf"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED',context.Target)"
data "Properties" "UseSpell(RiotTerror_Ranged,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','ZINC_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"

new entry "Interrupt_ChromiumLeach"
type "InterruptData"
data "Icon" "Spell_Enhancement_Chromium_Leach"
data "DisplayName" "h497cf67e6fa8438192a556dae5ff88a8e2ea;1"
data "Description" "hfc27206d1eda4f71b84d122c71727945e311;3"
data "DescriptionParams" "1"
data "TooltipAttackSave" "MeleeSpellAttack"
data "InterruptContext" "OnStatusApplied"
data "InterruptContextScope" "Nearby"
data "Container" "YesNoDecision"
data "Conditions" "MistbornHasSpellSlots() and Self(context.Source,context.Observer) and IsAbleToReact(context.Observer) and Enemy() and not HasStatus('SG_Invisible',context.Target) and not AnyEntityIsItem() and IsCurrentTurnInCombat() and HasStatus('ALLOMATIC_REFLEXES_DETECTED_INNER',context.Target)"
data "Properties" "UseSpell(Chromium_Leach_Base,true,true,true)"
data "Cost" "ReactionActionPoint:1;MetalReserves:2;Allomatic_Reflex_Resource:1"
data "InterruptDefaultValue" "Ask;Enabled"
data "EnableCondition" "not HasAnyStatus({'SG_Polymorph','SG_Blinded','CHROMIUM_DRAINED'}) or Tagged('MINDFLAYER') or HasStatus('SG_Disguise')"
data "EnableContext" "OnStatusApplied;OnStatusRemoved"
